{"version":3,"sources":["webpack:///src/components/system/Role.vue","webpack:///./src/components/system/Role.vue?a292","webpack:///./src/components/system/Role.vue"],"names":["Role","data","labelWidth","tableLoading","fullloading","dialogTitle","dialogVisible","authorityVisible","addbool","keywords","roleList","role","id","name","nameZh","idstr","props","label","children","treeData","checkedKeys","total","page","size","mounted","this","getList","methods","_this2","_this","$http","get","then","resp","status","$message","error","catch","response","$router","push","path","add","update","val","obj","title","window","clone","startsWith","slice","searchClick","alert","handleSelectionChange","i","cancelEidt","sendMsg","postMsg","putMsg","_this3","params","method","url","message","type","msg","console","log","_this4","deleteMsg","_this5","$confirm","confirmButtonText","cancelButtonText","deleteAll","ids","setAuthority","loadMenu","menus","mids","updateRoleMenu","_this6","$qs","stringify","roleId","menuIds","$refs","tree","getCheckedKeys","toString","handleCheckChange","checked","indeterminate","system_Role","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","staticStyle","margin-top","attrs","width","border","stripe","on","selection-change","align","_v","prop","fixed","scopedSlots","_u","key","fn","scope","padding","margin","click","$event","row","staticClass","icon","text-align","close-on-click-modal","visible","update:visible","_s","label-width","placeholder","prefix-icon","model","callback","$$v","$set","slot","display","ref","default-expanded-keys","default-checked-keys","node-key","show-checkbox","highlight-current","check-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.663aa558c0474f26555c.js","sourcesContent":["<template>\n  <div style=\"margin-top: 10px\" v-loading=\"fullloading\" id=\"base\">\n\n    <div style=\"margin-top: 20px\">\n      <el-table :data=\"roleList\" size=\"mini\" border stripe @selection-change=\"handleSelectionChange\" v-loading=\"tableLoading\" style=\"width: 100%\">\n        <el-table-column type=\"selection\" align=\"left\">\n        </el-table-column>\n        <el-table-column prop=\"nameZh\" align=\"center\" label=\"角色\">\n        </el-table-column>\n\n        <el-table-column label=\"操作\" align=\"center\" width=\"400\"  fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-button @click=\"setAuthority(scope.row.id,{title:'菜单权限'})\" type=\"primary\" style=\"padding: 3px 4px 3px 4px;margin: 10px\"\n                       size=\"mini\">菜单权限\n            </el-button>\n            <el-button @click=\"update(scope.row,{title:'修改'})\" type=\"primary\" style=\"padding: 3px 4px 3px 4px;margin: 10px\"\n                       size=\"mini\">修改\n            </el-button>\n            <el-button @click=\"deleteMsg(scope.row.id)\" type=\"danger\" style=\"padding: 3px 4px 3px 4px;margin: 10px\"\n                       size=\"mini\">删除\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n\n    <div class=\"clearfix\">\n      <div class=\"fl\" style=\"margin-top: 20px\">\n        <el-button size=\"mini\"  @click=\"add\" type=\"success\" icon=\"el-icon-search\">新增</el-button>\n        <el-button size=\"mini\" @click=\"deleteAll()\" type=\"danger\" icon=\"el-icon-delete\">删除</el-button>\n      </div>\n    </div>\n\n    <!--新增或修改弹框-->\n    <el-form style=\"margin: 0px;padding: 0px;\">\n      <div style=\"text-align: left\" id=\"Bdialog\">\n        <el-dialog\n          style=\"padding: 0px;\"\n          :close-on-click-modal=\"false\"\n          :visible.sync=\"dialogVisible\"\n          width=\"50%\">\n          <div class=\"dialog_B Detail\">\n            <div class=\"\" style=\"width: 700px;margin: auto\">\n              <h1 class=\"H1\">{{dialogTitle}}</h1>\n              <el-form style=\"margin: 0px;padding: 0px;\">\n                <el-form-item label=\"角色英文名：\" prop=\"name\" :label-width=\"labelWidth\">\n                  <el-input placeholder=\"请输入角色英文名\" prefix-icon=\"el-icon-edit\" v-model=\"role.name\">\n                    <template slot=\"prepend\">ROLE_</template>\n                  </el-input>\n                </el-form-item>\n                <el-form-item label=\"角色中文名：\" prop=\"username\" :label-width=\"labelWidth\">\n                  <el-input placeholder=\"请输入角色中文名\" prefix-icon=\"el-icon-edit\" v-model=\"role.nameZh\"></el-input>\n                </el-form-item>\n              </el-form>\n              <span slot=\"footer\" class=\"dialog-footer\" style=\"text-align: right;margin-top: 20px;width: 100%;display: block\">\n                <el-button size=\"small\" @click=\"cancelEidt()\">取 消</el-button>\n                <el-button size=\"small\" type=\"primary\" @click=\"sendMsg()\">确 定</el-button>\n              </span>\n            </div>\n          </div>\n        </el-dialog>\n      </div>\n    </el-form>\n\n    <!--权限设置弹框-->\n    <el-form style=\"width: 100px\">\n      <div style=\"text-align: left\">\n        <el-dialog\n          :title=\"dialogTitle\"\n          style=\"padding: 50px;\"\n          :close-on-click-modal=\"false\"\n          :visible.sync=\"authorityVisible\"\n          width=\"25%\">\n          <div style=\"text-align: center\">\n            <el-tree :props=\"props\"\n                     :key=\"role.id\"\n                     :data=\"treeData\"\n                     :default-expanded-keys=\"checkedKeys\"\n                     :default-checked-keys=\"checkedKeys\"\n                     node-key=\"id\"\n                     ref=\"tree\"\n                     show-checkbox\n                     highlight-current\n                     @check-change=\"handleCheckChange\">\n            </el-tree>\n          </div>\n          <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button size=\"mini\" @click=\"cancelEidt\">取消修改</el-button>\n            <el-button type=\"primary\" size=\"mini\" @click=\"updateRoleMenu\">确认修改</el-button>\n          </span>\n        </el-dialog>\n      </div>\n    </el-form>\n\n  </div>\n</template>\n<script>\n  export default{\n    data(){\n      return {\n        labelWidth:'100px',\n        tableLoading: false,\n        fullloading: false,\n        dialogTitle: '',//表单标题\n        dialogVisible:false,//修改的表单的弹框\n        authorityVisible:false,//菜单权限弹框\n        addbool: false,\n        keywords: '',\n        roleList:[],\n        role:{\n          id: null,\n          name:\"\",//角色英文名,\n          nameZh:\"\",//角色中文名,\n        },\n        idstr:'',\n\n        props: {\n          label: 'menuName',\n          children: 'children'\n        },\n        treeData: [],\n        checkedKeys: [],\n        total: -1,  //总页数\n        page: 1,  //当前页\n        size:6,   //每页多少条\n      }\n    },\n    mounted: function () {\n      this.getList();\n    },\n    methods: {\n      //获取列表\n      getList(){\n        let _this = this;\n        this.tableLoading = true;\n        this.$http.get(\"/system/role/getAll\").then(resp=> {\n          this.tableLoading = false;\n          if (resp && resp.status == 200) {\n            if(resp.data.status == 1){//成功\n              this.authorityVisible = false;\n              _this.roleList = resp.data.data; //列表数据\n            }else{//失败\n              this.$message.error(\"查询失败\");\n            }\n          }\n        }).catch((error=>{\n          if (error.response.status == '403') {\n            this.$router.push({path: '/forbidden403'}); // 对象\n          }\n        }))\n      },\n\n      //添加信息的预处理\n      add(){\n        this.role = {};\n        this.addbool = true;\n        this.dialogVisible = true;\n        this.dialogTitle = \"新增\";\n      },\n      //修改信息的预处理\n      update(val,obj){\n        this.dialogVisible = true;//弹框\n        this.addbool = false;\n        this.dialogTitle = obj.title;\n        this.role = window.clone(val);//克隆\n        let name = this.role.name;\n        name = name.startsWith(\"ROLE_\") ? name.slice(5) : name;\n        this.role.name = name;\n\n      },\n\n      searchClick(){\n        alert(\"ff\")\n      },\n      //选择框\n      handleSelectionChange(val) {\n        var idstr = \"\";\n        for(var　i in val ){\n          idstr+=val[i].id+\",\"\n        }\n        this.idstr = idstr;\n      },\n\n      //取消调用弹框的方法\n      cancelEidt(){\n        this.dialogVisible = false;\n        this.authorityVisible = false;\n      },\n      sendMsg(){\n        if(this.addbool){\n          this.postMsg();\n        }else{\n          this.putMsg();\n        }\n      },\n\n      //新增信息   post请求\n      postMsg(){\n        let params = this.role;\n        this.$http({\n          method:\"post\",\n          url:\"/system/role/save\",\n          data:params\n        }).then((response)=> {\n          let data = response.data;\n          if(data.status == 1){ //添加成功\n            this.dialogVisible = false;\n            this.$message({\n              message:'新增成功',\n              type:'success'\n            });\n            this.getList();\n          }else {\n            data.msg!=null?this.$message.error(data.msg):this.$message.error('新增失败');\n          }\n        }).catch((error)=>{\n          console.log(error);\n        })\n      },\n      //修改信息   put请求\n      putMsg(){\n        let params = this.role;\n        this.$http({\n          method:\"put\",\n          url:\"/system/role/update\",\n          data:params\n        }).then((response)=> {\n          let data = response.data;\n          if(data.status == 1){ //添加成功\n            this.dialogVisible = false;\n            this.$message({\n              message:'修改成功',\n              type:'success'\n            });\n            this.getList();\n          }else {\n            data.msg!=null?this.$message.error(data.msg):this.$message.error('修改失败');\n          }\n        }).catch((error)=>{\n          console.log(error);\n        })\n      },\n      //删除数据  delete请求\n      deleteMsg(val){\n        let _this = this;\n        this.$confirm('确定删除此操作?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          _this.$http({\n            method:\"delete\",\n            url:\"/system/role/delete/\"+val\n          }).then((response)=>{\n            let data = response.data;\n            if(data.status == 1){ //删除成功\n              this.$message({\n                message:'删除成功',\n                type:'success'\n              });\n              this.getList();\n            }else {\n              data.msg!=null?this.$message.error(data.msg):this.$message.error('删除失败');\n            }\n          }).catch((error)=>{\n            console.log(error);\n          })\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n      },\n      deleteAll(){\n        let ids = this.idstr;\n        if(!ids){\n          this.$message.error(\"提示，您还没有选择任何信息\");\n          return false;\n        }else{\n          this.deleteMsg(ids);\n        }\n      },\n\n      //设置菜单权限加载菜单\n      setAuthority(val,obj){\n        this.authorityVisible = true;//弹框\n        this.dialogTitle = obj.title;\n        this.role.id = val;\n        this.loadMenu(val);\n      },\n      //加载菜单\n      loadMenu(val){\n        let _this = this;\n        this.$http({\n          method:'get',\n          url:'/system/menu/tree/'+val\n        }).then((response=>{\n          let data = response.data;\n          if (data.status == 1) {\n            _this.treeData = data.data.menus;\n            _this.checkedKeys = data.data.mids;\n          }\n        })).catch((error=>{\n        }));\n      },\n\n      updateRoleMenu(){\n        let params = this.$qs.stringify({\n          roleId:this.role.id,\n          menuIds:this.$refs.tree.getCheckedKeys(true).toString()\n        });\n        let _this = this;\n        this.$http({\n          method:'put',\n          url:'/system/role/updateRoleMenu',\n          data:params\n        }).then((response)=>{\n          let data = response.data;\n          if(data.status == 1){\n            this.$message({\n              message:'修改成功',\n              type:'success'\n            });\n            this.getList();\n          }else {\n            data.msg!=null?this.$message.error(data.msg):this.$message.error('修改失败');\n          }\n        }).catch((error)=>{\n        });\n      },\n\n      handleCheckChange(data, checked, indeterminate) {\n        //console.log(data, checked, indeterminate);\n      },\n\n    }\n  }\n</script>\n<style lang=\"less\">\n  #base{\n    .el-upload-list--picture-card .el-upload-list__item{\n      width: 80px;\n      height: 80px;\n    }\n    .el-upload--picture-card{\n      width: 80px;height: 80px;\n      line-height: 86px;\n    }\n    .el-upload-list--picture-card{\n      float: left;\n    }\n    .el-form-item__label{\n      color: #333333;\n      font-weight: bold;\n      padding: 2px;\n    }\n\n    .el-input{\n      width: 80%;\n    }\n    .el-dialog{\n      margin-top: 5vh !important;\n      min-width: 500px;\n    }\n  }\n\n  #Bdialog{\n    .H1{\n      font: normal normal bold 28px/28px \"Adobe 黑体 Std R\";\n      color: #333333;\n      margin-bottom: 30px;\n      margin-top: 5px;\n    }\n    .leader{\n      text-align: left;\n      margin: 20px 0 ;\n      color: @warning;\n      .l_bar{\n        width: 7px;\n        font-size: 18px;\n        float: left;\n        line-height: 18px;\n        height: 21px;\n        display: inline-block;\n        background: @success;\n        margin: 3px 3px 0 0;\n      }\n    }\n    .dialog_B{\n      max-height: 700px;\n      padding-bottom: 30px;\n      overflow-y: scroll;\n    }\n    .div_main{\n      width: 700px;\n      margin: auto;\n      padding-bottom: 50px;\n    }\n    .Detail{\n      .el-form-item__label{\n        font-size: 16px;\n        color: #333333;\n      }\n      .lb_v{\n        font-size: 16px;\n      }\n    }\n    .dialog_B::-webkit-scrollbar{\n      display:none;\n    }\n    .el-form-item__content{\n      text-align: left;\n    }\n    .el-dialog__body{\n      padding: 6px 20px;\n    }\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/system/Role.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.fullloading),expression:\"fullloading\"}],staticStyle:{\"margin-top\":\"10px\"},attrs:{\"id\":\"base\"}},[_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.tableLoading),expression:\"tableLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.roleList,\"size\":\"mini\",\"border\":\"\",\"stripe\":\"\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"align\":\"left\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"nameZh\",\"align\":\"center\",\"label\":\"角色\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"400\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"padding\":\"3px 4px 3px 4px\",\"margin\":\"10px\"},attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.setAuthority(scope.row.id,{title:'菜单权限'})}}},[_vm._v(\"菜单权限\\n          \")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"padding\":\"3px 4px 3px 4px\",\"margin\":\"10px\"},attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.update(scope.row,{title:'修改'})}}},[_vm._v(\"修改\\n          \")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"padding\":\"3px 4px 3px 4px\",\"margin\":\"10px\"},attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.deleteMsg(scope.row.id)}}},[_vm._v(\"删除\\n          \")])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"clearfix\"},[_c('div',{staticClass:\"fl\",staticStyle:{\"margin-top\":\"20px\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"success\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.add}},[_vm._v(\"新增\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.deleteAll()}}},[_vm._v(\"删除\")])],1)]),_vm._v(\" \"),_c('el-form',{staticStyle:{\"margin\":\"0px\",\"padding\":\"0px\"}},[_c('div',{staticStyle:{\"text-align\":\"left\"},attrs:{\"id\":\"Bdialog\"}},[_c('el-dialog',{staticStyle:{\"padding\":\"0px\"},attrs:{\"close-on-click-modal\":false,\"visible\":_vm.dialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"dialog_B Detail\"},[_c('div',{staticStyle:{\"width\":\"700px\",\"margin\":\"auto\"}},[_c('h1',{staticClass:\"H1\"},[_vm._v(_vm._s(_vm.dialogTitle))]),_vm._v(\" \"),_c('el-form',{staticStyle:{\"margin\":\"0px\",\"padding\":\"0px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色英文名：\",\"prop\":\"name\",\"label-width\":_vm.labelWidth}},[_c('el-input',{attrs:{\"placeholder\":\"请输入角色英文名\",\"prefix-icon\":\"el-icon-edit\"},model:{value:(_vm.role.name),callback:function ($$v) {_vm.$set(_vm.role, \"name\", $$v)},expression:\"role.name\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"ROLE_\")])],2)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"角色中文名：\",\"prop\":\"username\",\"label-width\":_vm.labelWidth}},[_c('el-input',{attrs:{\"placeholder\":\"请输入角色中文名\",\"prefix-icon\":\"el-icon-edit\"},model:{value:(_vm.role.nameZh),callback:function ($$v) {_vm.$set(_vm.role, \"nameZh\", $$v)},expression:\"role.nameZh\"}})],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",staticStyle:{\"text-align\":\"right\",\"margin-top\":\"20px\",\"width\":\"100%\",\"display\":\"block\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.cancelEidt()}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.sendMsg()}}},[_vm._v(\"确 定\")])],1)],1)])])],1)]),_vm._v(\" \"),_c('el-form',{staticStyle:{\"width\":\"100px\"}},[_c('div',{staticStyle:{\"text-align\":\"left\"}},[_c('el-dialog',{staticStyle:{\"padding\":\"50px\"},attrs:{\"title\":_vm.dialogTitle,\"close-on-click-modal\":false,\"visible\":_vm.authorityVisible,\"width\":\"25%\"},on:{\"update:visible\":function($event){_vm.authorityVisible=$event}}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-tree',{key:_vm.role.id,ref:\"tree\",attrs:{\"props\":_vm.props,\"data\":_vm.treeData,\"default-expanded-keys\":_vm.checkedKeys,\"default-checked-keys\":_vm.checkedKeys,\"node-key\":\"id\",\"show-checkbox\":\"\",\"highlight-current\":\"\"},on:{\"check-change\":_vm.handleCheckChange}})],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.cancelEidt}},[_vm._v(\"取消修改\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.updateRoleMenu}},[_vm._v(\"确认修改\")])],1)])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d03ff1b4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/system/Role.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d03ff1b4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader!sass-resources-loader?{\\\"resources\\\":[\\\"E:\\\\\\\\base\\\\\\\\base_cli\\\\\\\\src\\\\\\\\style\\\\\\\\common.less\\\"]}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Role.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Role.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Role.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d03ff1b4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Role.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/system/Role.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}