webpackJsonp([10],{IOOP:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={data:function(){return{labelWidth:"100px",tableLoading:!1,fullloading:!1,dialogTitle:"",dialogVisible:!1,addbool:!1,keywords:"",sysUserList:[],sysUser:{id:null,name:"",phone:"",telephone:"",address:"",username:"",password:"",userface:"",remark:""},roleList:[],setRoleList:[],idstr:"",total:-1,page:1,size:6}},mounted:function(){this.getList()},methods:{getList:function(){var e=this,t=this;this.tableLoading=!0,this.$http.get("/system/sysUser/getAll").then(function(s){e.tableLoading=!1,s&&200==s.status&&(1==s.data.status?t.sysUserList=s.data.data:e.$message.error("查询失败"))}).catch(function(t){"403"==t.response.status&&e.$router.push({path:"/forbidden403"})})},getAllRole:function(){var e=this,t=this;this.$http.get("/system/role/getAll").then(function(s){s&&200==s.status?1==s.data.status?t.roleList=s.data.data:e.$message.error("查询失败"):s&&401==s.status&&e.$message.error("没有权限")})},add:function(){this.sysUser={},this.addbool=!0,this.dialogVisible=!0,this.dialogTitle="新增"},update:function(e,t){this.dialogVisible=!0,this.addbool=!1,this.dialogTitle=t.title,this.sysUser=window.clone(e)},searchClick:function(){alert("ff")},handleSelectionChange:function(e){var t="";for(var s in e)t+=e[s].id+",";this.idstr=t},cancelEidt:function(){this.dialogVisible=!1},sendMsg:function(){this.addbool?this.postMsg():this.putMsg()},postMsg:function(){var e=this,t=s("VI/i").createHash("md5").update(this.sysUser.password);this.sysUser.password=t.digest("hex");var l=this.sysUser;this.$http({method:"post",url:"/system/sysUser/save",data:l}).then(function(t){var s=t.data;1==s.status?(e.dialogVisible=!1,e.$message({message:"新增成功",type:"success"}),e.getList()):null!=s.msg?e.$message.error(s.msg):e.$message.error("新增失败")}).catch(function(e){console.log(e)})},putMsg:function(){var e=this;if(null!=this.sysUser.password){var t=s("VI/i").createHash("md5").update(this.sysUser.password);this.sysUser.password=t.digest("hex")}var l=this.sysUser;this.$http({method:"put",url:"/system/sysUser/update",data:l}).then(function(t){var s=t.data;1==s.status?(e.dialogVisible=!1,e.$message({message:"修改成功",type:"success"}),e.getList()):null!=s.msg?e.$message.error(s.msg):e.$message.error("修改失败")}).catch(function(e){console.log(e)})},deleteMsg:function(e){var t=this,s=this;this.$confirm("确定删除此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$http({method:"delete",url:"/system/sysUser/delete/"+e}).then(function(e){var s=e.data;1==s.status?(t.$message({message:"删除成功",type:"success"}),t.getList()):null!=s.msg?t.$message.error(s.msg):t.$message.error("删除失败")}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deleteAll:function(){var e=this.idstr;if(!e)return this.$message.error("提示，您还没有选择任何信息"),!1;this.deleteMsg(e)},updateRole:function(e){var t=this,s=this.$qs.stringify({sysUserId:e,roleIds:this.setRoleList.toString()});this.$http({method:"put",url:"/system/sysUser/updateRoles",data:s}).then(function(e){var s=e.data;1==s.status?t.getList():null!=s.msg?t.$message.error(s.msg):t.$message.error("修改失败")}).catch(function(e){})},loadSetRoles:function(e){var t=this;0==this.roleList.length&&this.getAllRole(),this.setRoleList=[],e.forEach(function(e){t.setRoleList.push(e.id)})}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fullloading,expression:"fullloading"}],staticStyle:{"margin-top":"10px"},attrs:{id:"userManage"}},[s("div",{staticStyle:{"margin-top":"20px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.sysUserList,size:"mini",border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",align:"left"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),e._v(" "),s("el-table-column",{attrs:{prop:"username",align:"center",label:"用户名"}}),e._v(" "),s("el-table-column",{attrs:{prop:"phone",align:"center",label:"手机号码"}}),e._v(" "),s("el-table-column",{attrs:{prop:"telephone",align:"center",label:"住宅电话"}}),e._v(" "),s("el-table-column",{attrs:{prop:"address",align:"center",label:"联系地址"}}),e._v(" "),s("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"用户角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.roles,function(t){return s("el-tag",{key:t.id,staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"mini","disable-transitions":!1}},[e._v("\n            "+e._s(t.nameZh)+"\n          ")])}),e._v(" "),s("el-popover",{attrs:{placement:"bottom",title:"角色列表",width:"200",trigger:"click"},on:{hide:function(s){e.updateRole(t.row.id)}}},[s("el-select",{attrs:{multiple:"",placeholder:"请选择角色"},model:{value:e.setRoleList,callback:function(t){e.setRoleList=t},expression:"setRoleList"}},e._l(e.roleList,function(e){return s("el-option",{key:e.id,attrs:{label:e.nameZh,value:e.id}})})),e._v(" "),s("el-button",{staticStyle:{color:"#09c0f6","padding-top":"0px"},attrs:{slot:"reference",type:"text",icon:"el-icon-more"},on:{click:function(s){e.loadSetRoles(t.row.roles)}},slot:"reference"})],1)]}}])}),e._v(" "),e.$hasButton("sysUserEdit")||e.$hasButton("sysUserDel")?s("el-table-column",{attrs:{label:"操作",align:"center",width:"300",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$hasButton("sysUserEdit")?s("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"primary",size:"mini"},on:{click:function(s){e.update(t.row,{title:"修改"})}}},[e._v("修改\n          ")]):e._e(),e._v(" "),e.$hasButton("sysUserDel")?s("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(s){e.deleteMsg(t.row.id)}}},[e._v("删除\n          ")]):e._e()]}}])}):e._e()],1)],1),e._v(" "),s("div",{staticClass:"clearfix"},[s("div",{staticClass:"fl",staticStyle:{"margin-top":"20px"}},[e.$hasButton("sysUserAdd")?s("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.add}},[e._v("新增")]):e._e(),e._v(" "),e.$hasButton("sysUserDel")?s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(t){e.deleteAll()}}},[e._v("删除")]):e._e()],1)]),e._v(" "),s("el-form",{staticStyle:{margin:"0px",padding:"0px"}},[s("div",{staticStyle:{"text-align":"left"},attrs:{id:"Bdialog"}},[s("el-dialog",{staticStyle:{padding:"0px"},attrs:{"close-on-click-modal":!1,visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("div",{staticClass:"dialog_B Detail"},[s("div",{staticStyle:{width:"700px",margin:"auto"}},[s("h1",{staticClass:"H1"},[e._v(e._s(e.dialogTitle))]),e._v(" "),s("el-form",{staticStyle:{margin:"0px",padding:"0px"}},[s("el-form-item",{attrs:{label:"姓名：",prop:"name","label-width":e.labelWidth}},[s("el-input",{attrs:{placeholder:"请输入姓名","prefix-icon":"el-icon-edit"},model:{value:e.sysUser.name,callback:function(t){e.$set(e.sysUser,"name",t)},expression:"sysUser.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户名：",prop:"username","label-width":e.labelWidth}},[s("el-input",{attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-edit"},model:{value:e.sysUser.username,callback:function(t){e.$set(e.sysUser,"username",t)},expression:"sysUser.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码：",prop:"","label-width":e.labelWidth}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-edit"},model:{value:e.sysUser.password,callback:function(t){e.$set(e.sysUser,"password",t)},expression:"sysUser.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号码：",prop:"phone","label-width":e.labelWidth}},[s("el-input",{attrs:{placeholder:"请输入手机号码","prefix-icon":"el-icon-edit"},model:{value:e.sysUser.phone,callback:function(t){e.$set(e.sysUser,"phone",t)},expression:"sysUser.phone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"住宅电话：",prop:"telephone","label-width":e.labelWidth}},[s("el-input",{attrs:{placeholder:"请输入住宅电话","prefix-icon":"el-icon-edit"},model:{value:e.sysUser.telephone,callback:function(t){e.$set(e.sysUser,"telephone",t)},expression:"sysUser.telephone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"联系地址：",prop:"address","label-width":e.labelWidth}},[s("el-input",{attrs:{placeholder:"请输入联系地址","prefix-icon":"el-icon-edit"},model:{value:e.sysUser.address,callback:function(t){e.$set(e.sysUser,"address",t)},expression:"sysUser.address"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"备注：",prop:"remark","label-width":e.labelWidth}},[s("el-input",{attrs:{placeholder:"请输入备注","prefix-icon":"el-icon-edit"},model:{value:e.sysUser.remark,callback:function(t){e.$set(e.sysUser,"remark",t)},expression:"sysUser.remark"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"right","margin-top":"20px",width:"100%",display:"block"},attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.cancelEidt()}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.sendMsg()}}},[e._v("确 定")])],1)],1)])])],1)])],1)},staticRenderFns:[]};var a=s("VU/8")(l,i,!1,function(e){s("PjPX")},null,null);t.default=a.exports},PjPX:function(e,t){}});
//# sourceMappingURL=10.49510853868f1b94d50b.js.map